# Use an in-memory H2 DB and ensure the 'TARIFF' schema exists (matches entity schema)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;INIT=CREATE SCHEMA IF NOT EXISTS TARIFF\;CREATE SCHEMA IF NOT EXISTS TRADE\;SET SCHEMA TARIFF
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=false

# Ensure Spring initializes the datasource (and runs schema scripts) before Hibernate/JPA starts
spring.jpa.defer-datasource-initialization=false

# Ensure Hibernate uses the TARIFF schema when creating tables
spring.jpa.properties.hibernate.default_schema=TARIFF
# Ensure Spring runs schema.sql to create any required schemas before Hibernate runs
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

# Prevent loading application DataLoader during tests (if conditional on profile)
spring.main.banner-mode=off